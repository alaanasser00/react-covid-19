{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\Salam\\\\react-learnspace\\\\react-covid-19\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef,useContext}from'react';import{DataContext}from'../../contexts/DataContext';import styles from'./Search.module.css';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faSearch}from'@fortawesome/free-solid-svg-icons';var Search=function Search(_ref){var updateText=_ref.updateText;// Retrieve Context Data\nvar _useContext=useContext(DataContext),showWorldwideData=_useContext.showWorldwideData,countriesData=_useContext.countriesData;var _countriesData=_slicedToArray(countriesData,1),countriesDataSearch=_countriesData[0];var _showWorldwideData=_slicedToArray(showWorldwideData,2),setShowWorldwide=_showWorldwideData[1];var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),display=_useState4[0],setDisplay=_useState4[1];var wrapperRef=useRef(null);useEffect(function(){window.addEventListener(\"mousedown\",handleInputClickOutside);return function(){window.removeEventListener(\"mousedown\",handleInputClickOutside);};},[]);var handleFormSubmit=function handleFormSubmit(e){e.preventDefault();if(document.getElementById('search_input').value.length!==0&&document.getElementById('search_input').value!==text){updateText(text);setShowWorldwide(false);}};var handleInputChange=function handleInputChange(e){setText(e.target.value);};var handleInputClickInside=function handleInputClickInside(e){setDisplay(true);};var handleInputClickOutside=function handleInputClickOutside(e){var wrap=wrapperRef.current;if(wrap&&!wrap.contains(e.target)){setDisplay(false);}};var updateOptionVal=function updateOptionVal(text){setText(text);updateText(text);setDisplay(false);};return/*#__PURE__*/React.createElement(\"div\",{ref:wrapperRef,className:styles.search},/*#__PURE__*/React.createElement(\"form\",{action:\"\",onSubmit:handleFormSubmit},/*#__PURE__*/React.createElement(\"input\",{id:\"search_input\",type:\"text\",onClick:handleInputClickInside,className:styles.form_control,placeholder:\"Search for a country\",value:text,onChange:handleInputChange,autoComplete:\"off\"}),/*#__PURE__*/React.createElement(\"button\",{className:styles.search_btn,type:\"submit\"},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faSearch})),display&&/*#__PURE__*/React.createElement(\"div\",{className:styles.search_options},countriesDataSearch.filter(function(_ref2){var country=_ref2.country;return country.indexOf(text.charAt(0).toUpperCase()+text.slice(1))>-1;}).map(function(value,id){return/*#__PURE__*/React.createElement(\"div\",{key:id,className:styles.search_option,onClick:function onClick(){return updateOptionVal(value.country);}},/*#__PURE__*/React.createElement(\"img\",{src:value.countryInfo.flag,alt:\"\"}),/*#__PURE__*/React.createElement(\"span\",null,value.country));}))));};export default Search;","map":{"version":3,"sources":["C:/Users/Salam/react-learnspace/react-covid-19/src/Components/Search/Search.js"],"names":["React","useState","useEffect","useRef","useContext","DataContext","styles","FontAwesomeIcon","faSearch","Search","updateText","showWorldwideData","countriesData","countriesDataSearch","setShowWorldwide","text","setText","display","setDisplay","wrapperRef","window","addEventListener","handleInputClickOutside","removeEventListener","handleFormSubmit","e","preventDefault","document","getElementById","value","length","handleInputChange","target","handleInputClickInside","wrap","current","contains","updateOptionVal","search","form_control","search_btn","search_options","filter","country","indexOf","charAt","toUpperCase","slice","map","id","search_option","countryInfo","flag"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef, useContext } from 'react';\r\nimport { DataContext } from '../../contexts/DataContext';\r\nimport styles from './Search.module.css'\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faSearch } from '@fortawesome/free-solid-svg-icons'\r\n\r\nconst Search = ({ updateText }) => {\r\n    // Retrieve Context Data\r\n    const { showWorldwideData, countriesData } = useContext(DataContext)\r\n    const [countriesDataSearch,] = countriesData;\r\n    const [, setShowWorldwide] = showWorldwideData;\r\n\r\n    const [text, setText] = useState(\"\");\r\n    const [display, setDisplay] = useState(false);\r\n    const wrapperRef = useRef(null);\r\n\r\n    \r\n    useEffect(() => {\r\n        window.addEventListener(\"mousedown\", handleInputClickOutside);\r\n        return () => {\r\n            window.removeEventListener(\"mousedown\", handleInputClickOutside);\r\n        };\r\n    }, []);\r\n\r\n    const handleFormSubmit = e => {\r\n        e.preventDefault();\r\n        if (\r\n            document.getElementById('search_input').value.length !== 0 \r\n            && document.getElementById('search_input').value !== text\r\n        ) {\r\n            updateText(text)\r\n            setShowWorldwide(false)\r\n        }\r\n    }\r\n\r\n    const handleInputChange = e => {\r\n        setText(e.target.value);\r\n    }\r\n\r\n    const handleInputClickInside = e => {\r\n        setDisplay(true);\r\n    }\r\n\r\n    const handleInputClickOutside = e => {\r\n        const { current: wrap } = wrapperRef;\r\n        if (wrap && !wrap.contains(e.target)) {\r\n            setDisplay(false);\r\n        }\r\n    };\r\n\r\n    const updateOptionVal = text => {\r\n        setText(text);\r\n        updateText(text)\r\n        setDisplay(false);\r\n    };\r\n\r\n    return (\r\n        <div ref={wrapperRef} className={styles.search}>\r\n            <form action=\"\" onSubmit={handleFormSubmit}>\r\n                <input \r\n                    id=\"search_input\"\r\n                    type=\"text\"\r\n                    onClick={handleInputClickInside}\r\n                    className={styles.form_control}\r\n                    placeholder=\"Search for a country\" \r\n                    value={text}\r\n                    onChange={handleInputChange}\r\n                    autoComplete=\"off\"\r\n                />\r\n                <button className={styles.search_btn} type=\"submit\">\r\n                    <FontAwesomeIcon icon={faSearch} />\r\n                </button>\r\n                { display && (\r\n                    <div className={styles.search_options}>\r\n                        {countriesDataSearch\r\n                            .filter(({ country }) => country.indexOf(text.charAt(0).toUpperCase() + text.slice(1)) > -1)\r\n                            .map((value, id) => {\r\n                            return (\r\n                                <div key={id} className={styles.search_option} onClick={() => updateOptionVal(value.country)}>\r\n                                    <img src={value.countryInfo.flag} alt=\"\"/>\r\n                                    <span>{value.country}</span>\r\n                                </div>\r\n                            )\r\n                        })}\r\n                    </div>\r\n                )}\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Search\r\n"]},"metadata":{},"sourceType":"module"}